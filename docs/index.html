<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slovak Election Poll Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gov-color: #e74c3c;
            --opp-color: #3498db;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: #f5f6fa;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        header h1 { font-size: 2.2em; margin-bottom: 5px; }
        header .subtitle { opacity: 0.9; }

        .meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .meta-item {
            background: rgba(255,255,255,0.2);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85em;
        }

        .controls {
            background: white;
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label { font-weight: 500; font-size: 0.9em; }

        .control-group input[type="range"] { width: 100px; }

        .control-group select, .control-group input {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .nav-links {
            display: flex;
            gap: 10px;
        }

        .nav-links a {
            color: var(--primary);
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 5px;
            font-size: 0.9em;
            transition: background 0.2s;
        }

        .nav-links a:hover { background: var(--light); }

        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 25px;
            overflow: hidden;
        }

        .card-header {
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            font-size: 1.1em;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header .badge {
            background: rgba(255,255,255,0.2);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.8em;
        }

        .card-body { padding: 20px; }

        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }

        .chart-container.small { height: 300px; }

        .party-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
            font-size: 0.9em;
        }

        .legend-item:hover { transform: scale(1.05); }
        .legend-item.highlighted { border-color: var(--dark); box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        .legend-item.dimmed { opacity: 0.3; }

        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 50%;
        }

        .legend-item .trend {
            font-size: 0.8em;
            margin-left: 4px;
        }

        .legend-item .trend.up { color: var(--success); }
        .legend-item .trend.down { color: var(--danger); }

        .block-indicator {
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 3px;
            margin-left: 5px;
        }

        .block-indicator.gov { background: var(--gov-color); color: white; }
        .block-indicator.opp { background: var(--opp-color); color: white; }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 900px) {
            .two-column { grid-template-columns: 1fr; }
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid var(--light);
        }

        th { background: var(--light); font-weight: 600; font-size: 0.9em; }
        tr:hover { background: #f8f9fa; }

        .rising { color: var(--success); }
        .falling { color: var(--danger); }
        .stable { color: var(--warning); }

        .high { color: var(--success); }
        .medium { color: var(--warning); }
        .low { color: var(--danger); }

        .scenario-card {
            border: 1px solid var(--light);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .scenario-header {
            background: var(--light);
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .scenario-header:hover { background: #dfe6e9; }

        .scenario-header h4 { margin: 0; font-size: 1em; }

        .scenario-content {
            padding: 15px;
            display: none;
        }

        .scenario-content.active { display: block; }

        .scenario-blocks {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .scenario-block {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .scenario-block.gov { background: rgba(231, 76, 60, 0.1); border: 2px solid var(--gov-color); }
        .scenario-block.opp { background: rgba(52, 152, 219, 0.1); border: 2px solid var(--opp-color); }

        .scenario-block .seats { font-size: 2em; font-weight: bold; }
        .scenario-block .change { font-size: 0.9em; }
        .scenario-block .status { margin-top: 5px; font-size: 0.85em; }

        .correlation-matrix {
            display: grid;
            gap: 2px;
            margin: 20px auto;
            max-width: 600px;
        }

        .correlation-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: 500;
            border-radius: 3px;
        }

        .correlation-label {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.8em;
            background: var(--light);
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.85em;
        }

        footer a { color: var(--secondary); }

        .lang-switch { gap: 5px; }

        .lang-btn {
            padding: 6px 12px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: var(--primary);
            color: white;
        }

        .lang-btn:hover:not(.active) { background: var(--light); }

        .toggle-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9em;
        }

        .toggle-label input { display: none; }

        .toggle-slider {
            width: 40px;
            height: 22px;
            background: #ccc;
            border-radius: 11px;
            position: relative;
            transition: background 0.2s;
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.2s;
        }

        .toggle-label input:checked + .toggle-slider {
            background: var(--secondary);
        }

        .toggle-label input:checked + .toggle-slider::before {
            transform: translateX(18px);
        }

        .info-box {
            background: #e8f4fd;
            border-left: 4px solid var(--secondary);
            padding: 12px 15px;
            margin: 15px 0;
            font-size: 0.9em;
        }

        .block-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 15px 0;
            font-size: 0.9em;
        }

        .block-legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .block-legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <header>
        <h1>üá∏üá∞ Slovak Election Poll Analysis</h1>
        <p class="subtitle">Interactive Kalman-filtered trends and statistical analysis</p>
        <div class="meta">
            <span class="meta-item" id="dateRange"></span>
            <span class="meta-item" id="lastUpdated"></span>
        </div>
    </header>

    <div class="controls">
        <div class="control-group lang-switch">
            <button id="langEN" class="lang-btn active" onclick="setLanguage('en')">EN</button>
            <button id="langSK" class="lang-btn" onclick="setLanguage('sk')">SK</button>
        </div>
        <div class="control-group">
            <label data-i18n="threshold">Threshold:</label>
            <input type="range" id="thresholdSlider" min="0" max="10" step="0.5" value="5">
            <span id="thresholdValue">5%</span>
        </div>
        <div class="control-group">
            <label data-i18n="forecast">Forecast:</label>
            <select id="forecastSelect">
                <option value="3">3</option>
                <option value="6" selected>6</option>
                <option value="9">9</option>
                <option value="12">12</option>
            </select>
            <span data-i18n="months">months</span>
        </div>
        <div class="control-group">
            <label class="toggle-label">
                <input type="checkbox" id="kalmanToggle" checked>
                <span class="toggle-slider"></span>
                <span data-i18n="useKalman">Kalman Filter</span>
            </label>
        </div>
        <div class="nav-links">
            <a href="#trends" data-i18n="trends">Trends</a>
            <a href="#blocks" data-i18n="blocks">Blocks</a>
            <a href="#seats" data-i18n="seats">Seats</a>
            <a href="#scenarios" data-i18n="scenarios">Scenarios</a>
            <a href="#correlations" data-i18n="correlations">Correlations</a>
            <a href="#volatility" data-i18n="volatility">Volatility</a>
        </div>
    </div>

    <div class="container">
        <!-- Party Trends -->
        <section id="trends" class="card">
            <div class="card-header">
                üìà Party Trends
                <span class="badge">Kalman Filtered</span>
            </div>
            <div class="card-body">
                <div class="info-box">
                    Click on a party in the legend to highlight it. Dashed lines show forecasts with 95% confidence intervals.
                </div>
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
                <div class="party-legend" id="partyLegend"></div>
            </div>
        </section>

        <!-- Coalition Blocks -->
        <section id="blocks" class="card">
            <div class="card-header">
                ‚öñÔ∏è Coalition Blocks
            </div>
            <div class="card-body">
                <div class="block-legend">
                    <div class="block-legend-item">
                        <div class="block-legend-color" style="background: var(--gov-color);"></div>
                        <span><strong>Government:</strong> SMER + HLAS + SNS + REP</span>
                    </div>
                    <div class="block-legend-item">
                        <div class="block-legend-color" style="background: var(--opp-color);"></div>
                        <span><strong>Opposition:</strong> PS + SAS + DEM + SLOV + KDH</span>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="blocksChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Parliament Seats -->
        <section id="seats" class="card">
            <div class="card-header">
                üèõÔ∏è Parliament Seats
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="seatsChart"></canvas>
                </div>
                <div class="info-box">
                    <strong>76 seats</strong> = Simple majority | <strong>90 seats</strong> = Constitutional majority (2/3)
                </div>
            </div>
        </section>

        <!-- Scenarios -->
        <section id="scenarios" class="card">
            <div class="card-header">
                üé≠ What-If Scenarios
                <span class="badge" id="scenarioCount"></span>
            </div>
            <div class="card-body">
                <div class="info-box">
                    Click on a scenario to see detailed seat projections. These are pre-calculated based on current polling data.
                </div>
                <div id="scenariosList"></div>
            </div>
        </section>

        <div class="two-column">
            <!-- Correlations -->
            <section id="correlations" class="card">
                <div class="card-header">üîó Party Correlations</div>
                <div class="card-body">
                    <div id="correlationMatrix"></div>
                    <div id="correlationList"></div>
                </div>
            </section>

            <!-- Volatility -->
            <section id="volatility" class="card">
                <div class="card-header">üìä Polling Volatility</div>
                <div class="card-body">
                    <table id="volatilityTable">
                        <thead>
                            <tr>
                                <th>Party</th>
                                <th>Mean</th>
                                <th>Std Dev</th>
                                <th>CV</th>
                                <th>Stability</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <footer>
        <p>Data sources: Wikipedia opinion polling, various Slovak polling agencies</p>
        <p>Analysis powered by Kalman filtering | <a href="data.json">Download JSON Data</a></p>
        <p>Generated with <a href="https://github.com/anthropics/claude-code" target="_blank">Claude Code</a></p>
    </footer>

    <script>
        // Embedded data
        const DATA = {"meta": {"generatedAt": "2025-12-09 22:14:18", "dateRange": {"start": "September 2023", "end": "December 2025"}, "defaultThreshold": 5.0, "defaultForecast": 6}, "parties": {"Aliancia": {"current": 4.09, "trend": 0.023, "aboveThreshold": false, "color": "#009933", "isGovernment": false, "isOpposition": false, "isCatholic": false, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [3.6, 3.55, 3.85, 3.96, 3.94, 4.02, 4.05, 4.14, 4.34, 4.01, 3.91, 3.83, 3.71, 3.96, 4.21, 4.09], "uncertainties": [1.15, 0.98, 0.88, 0.86, 1.08, 0.92, 0.86, 0.85, 0.84, 0.77, 0.81, 0.83, 1.03, 0.89, 0.94, 1.09], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [4.11, 4.13, 4.14, 4.15, 4.15, 4.15, 4.16, 4.16, 4.16, 4.16, 4.16, 4.16], "upper": [6.78, 7.24, 7.61, 7.91, 8.15, 8.35, 8.51, 8.64, 8.76, 8.86, 8.94, 9.03], "lower": [1.45, 1.02, 0.66, 0.38, 0.15, -0.04, -0.19, -0.32, -0.43, -0.53, -0.62, -0.7]}}, "REP": {"current": 8.89, "trend": 0.365, "aboveThreshold": true, "color": "#1a1a1a", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [1.6, 0.79, 1.02, 0.63, 0.43, 0.88, 0.8, 1.61, 1.86, 1.41, 1.68, 2.79, 4.67, 5.71, 7.08, 5.24, 5.65, 6.68, 7.66, 7.38, 7.62, 8.62, 8.61, 6.05, 7.25, 7.8, 8.89], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [9.2, 9.43, 9.59, 9.71, 9.79, 9.85, 9.89, 9.93, 9.95, 9.97, 9.98, 9.99], "upper": [11.64, 12.32, 12.85, 13.26, 13.58, 13.83, 14.04, 14.2, 14.34, 14.46, 14.57, 14.66], "lower": [6.77, 6.54, 6.33, 6.15, 6.0, 5.87, 5.75, 5.65, 5.56, 5.47, 5.39, 5.32]}}, "DEM": {"current": 5.35, "trend": 0.206, "aboveThreshold": true, "color": "#FF6600", "isGovernment": false, "isOpposition": true, "isCatholic": true, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [4.99, 4.92, 4.36, 3.0, 1.92, 1.32, 0.96, 1.56, 1.7, 1.95, 1.57, 2.58, 3.54, 3.59, 3.93, 4.02, 3.73, 4.08, 4.34, 4.3, 4.29, 4.5, 4.41, 4.2, 4.46, 5.01, 5.35], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [5.53, 5.65, 5.75, 5.81, 5.86, 5.89, 5.92, 5.94, 5.95, 5.96, 5.97, 5.97], "upper": [7.97, 8.55, 9.0, 9.36, 9.65, 9.88, 10.06, 10.21, 10.34, 10.45, 10.55, 10.64], "lower": [3.09, 2.76, 2.49, 2.26, 2.07, 1.91, 1.78, 1.66, 1.56, 1.46, 1.38, 1.3]}}, "SMER": {"current": 17.13, "trend": -0.358, "aboveThreshold": true, "color": "#E31E24", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [22.95, 23.67, 23.95, 23.12, 22.53, 22.13, 21.54, 21.99, 23.02, 23.74, 23.59, 23.82, 22.76, 21.57, 20.67, 20.64, 21.06, 21.21, 20.48, 19.85, 19.39, 19.04, 18.62, 18.4, 17.94, 17.21, 17.13], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [16.83, 16.61, 16.45, 16.34, 16.25, 16.19, 16.15, 16.12, 16.1, 16.08, 16.07, 16.06], "upper": [19.27, 19.5, 19.71, 19.89, 20.04, 20.18, 20.29, 20.4, 20.49, 20.58, 20.66, 20.73], "lower": [14.39, 13.72, 13.19, 12.79, 12.47, 12.21, 12.01, 11.84, 11.7, 11.59, 11.48, 11.39]}}, "SNS": {"current": 3.63, "trend": -0.047, "aboveThreshold": false, "color": "#003366", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [4.43, 4.55, 4.13, 4.1, 3.37, 3.34, 3.34, 3.59, 3.49, 3.75, 3.86, 3.75, 3.67, 3.96, 4.2, 3.63], "uncertainties": [1.15, 1.13, 0.91, 0.96, 1.14, 1.05, 1.0, 0.99, 0.98, 0.88, 0.93, 0.96, 1.11, 1.02, 0.99, 1.11], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [3.59, 3.56, 3.54, 3.52, 3.51, 3.5, 3.5, 3.49, 3.49, 3.49, 3.48, 3.48], "upper": [6.3, 6.71, 7.05, 7.33, 7.55, 7.73, 7.88, 8.01, 8.12, 8.22, 8.31, 8.38], "lower": [0.88, 0.4, 0.02, -0.29, -0.53, -0.73, -0.89, -1.03, -1.15, -1.25, -1.34, -1.42]}}, "PS": {"current": 22.97, "trend": 0.117, "aboveThreshold": true, "color": "#6B2D5C", "isGovernment": false, "isOpposition": true, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [17.96, 18.75, 19.59, 20.12, 20.91, 21.04, 20.72, 21.33, 23.07, 22.71, 22.89, 22.88, 23.03, 23.03, 23.13, 23.58, 22.89, 22.63, 22.42, 22.02, 21.82, 21.47, 21.94, 22.23, 22.71, 22.94, 22.97], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [23.07, 23.14, 23.19, 23.23, 23.25, 23.27, 23.29, 23.3, 23.31, 23.31, 23.32, 23.32], "upper": [25.5, 26.03, 26.45, 26.78, 27.04, 27.26, 27.43, 27.58, 27.7, 27.81, 27.9, 27.99], "lower": [20.63, 20.25, 19.93, 19.68, 19.47, 19.29, 19.15, 19.02, 18.91, 18.82, 18.73, 18.65]}}, "HLAS": {"current": 8.09, "trend": -0.435, "aboveThreshold": true, "color": "#003DA5", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [14.7, 14.94, 15.06, 15.42, 15.99, 16.17, 16.79, 16.1, 14.35, 13.66, 13.99, 13.36, 13.23, 12.92, 12.73, 12.16, 11.55, 11.2, 10.64, 10.09, 10.36, 10.62, 10.25, 9.8, 9.46, 8.91, 8.09], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [7.72, 7.45, 7.26, 7.12, 7.02, 6.95, 6.89, 6.85, 6.83, 6.81, 6.79, 6.78], "upper": [10.16, 10.34, 10.52, 10.67, 10.81, 10.93, 11.03, 11.13, 11.22, 11.3, 11.38, 11.45], "lower": [5.28, 4.56, 4.0, 3.57, 3.23, 2.96, 2.75, 2.58, 2.43, 2.31, 2.21, 2.11]}}, "SAS": {"current": 6.68, "trend": -0.012, "aboveThreshold": true, "color": "#FFD700", "isGovernment": false, "isOpposition": true, "isCatholic": false, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [6.3, 6.32, 6.45, 6.12, 6.13, 6.26, 6.32, 6.55, 6.55, 6.58, 6.81, 6.98, 7.25, 6.82, 6.8, 6.68], "uncertainties": [1.15, 0.98, 0.88, 0.86, 1.08, 0.92, 0.86, 0.85, 0.84, 0.77, 0.81, 0.83, 1.03, 0.89, 0.85, 1.03], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [6.67, 6.66, 6.65, 6.65, 6.65, 6.65, 6.64, 6.64, 6.64, 6.64, 6.64, 6.64], "upper": [9.22, 9.66, 10.02, 10.31, 10.54, 10.73, 10.89, 11.02, 11.13, 11.23, 11.32, 11.41], "lower": [4.12, 3.66, 3.29, 2.99, 2.76, 2.56, 2.4, 2.27, 2.15, 2.05, 1.96, 1.88]}}, "KDH": {"current": 5.79, "trend": -0.166, "aboveThreshold": true, "color": "#0066CC", "isGovernment": false, "isOpposition": true, "isCatholic": true, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [6.82, 6.76, 6.8, 7.0, 7.05, 7.12, 7.28, 6.92, 6.68, 6.69, 6.61, 6.37, 6.39, 6.46, 6.49, 6.55, 7.02, 7.15, 7.4, 7.36, 7.16, 6.82, 6.58, 6.47, 6.36, 6.08, 5.79], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [5.65, 5.55, 5.47, 5.42, 5.38, 5.35, 5.33, 5.32, 5.31, 5.3, 5.3, 5.29], "upper": [8.09, 8.44, 8.73, 8.97, 9.17, 9.34, 9.48, 9.6, 9.7, 9.8, 9.88, 9.96], "lower": [3.21, 2.66, 2.22, 1.87, 1.59, 1.37, 1.19, 1.04, 0.92, 0.81, 0.71, 0.62]}}, "ROD": {"current": 3.16, "trend": -0.013, "aboveThreshold": false, "color": "#8B0000", "isGovernment": false, "isOpposition": false, "isCatholic": true, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [3.9, 3.9, 3.65, 3.67, 3.31, 3.26, 3.24, 3.34, 3.38, 3.25, 3.37, 3.14, 3.2, 3.18, 2.88, 3.16], "uncertainties": [1.41, 1.25, 1.05, 1.16, 1.25, 1.08, 1.01, 1.15, 0.92, 0.86, 1.04, 0.9, 1.07, 1.17, 1.04, 1.14], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [3.15, 3.14, 3.13, 3.13, 3.13, 3.13, 3.12, 3.12, 3.12, 3.12, 3.12, 3.12], "upper": [5.91, 6.35, 6.7, 6.99, 7.22, 7.4, 7.56, 7.69, 7.8, 7.9, 7.99, 8.06], "lower": [0.38, -0.07, -0.43, -0.73, -0.96, -1.15, -1.31, -1.44, -1.56, -1.66, -1.74, -1.82]}}, "SLOV": {"current": 6.81, "trend": 0.107, "aboveThreshold": true, "color": "#00A651", "isGovernment": false, "isOpposition": true, "isCatholic": true, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [0.84, 0.86, 0.69, 1.02, 1.34, 1.96, 1.58, 2.5, 2.77, 2.21, 1.66, 3.07, 4.2, 4.27, 5.29, 4.16, 5.27, 6.11, 7.1, 7.13, 7.22, 7.61, 7.38, 5.73, 6.06, 6.51, 6.81], "uncertainties": [1.41, 0.99, 0.97, 0.81, 0.78, 0.9, 0.96, 0.88, 0.78, 0.75, 0.88, 0.78, 0.89, 0.78, 0.81, 0.83, 0.77, 0.8, 0.82, 0.76, 0.7, 0.78, 0.76, 0.75, 0.74, 0.75, 0.97], "forecast": {"dates": ["2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15", "2026-12-15"], "values": [6.9, 6.97, 7.01, 7.05, 7.07, 7.09, 7.1, 7.11, 7.12, 7.12, 7.13, 7.13], "upper": [9.34, 9.86, 10.27, 10.6, 10.86, 11.07, 11.25, 11.39, 11.51, 11.62, 11.72, 11.8], "lower": [4.46, 4.07, 3.76, 3.5, 3.28, 3.11, 2.96, 2.84, 2.73, 2.63, 2.54, 2.46]}}, "PRAV": {"current": 2.0, "trend": 0.0, "aboveThreshold": false, "color": "#666666", "isGovernment": false, "isOpposition": false, "isCatholic": false, "dates": ["2025-11-15"], "values": [2.0], "uncertainties": [1.41], "forecast": {"dates": ["2025-12-15", "2026-01-15", "2026-02-15", "2026-03-15", "2026-04-15", "2026-05-15", "2026-06-15", "2026-07-15", "2026-08-15", "2026-09-15", "2026-10-15", "2026-11-15"], "values": [2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0], "upper": [4.99, 5.31, 5.61, 5.87, 6.09, 6.28, 6.43, 6.56, 6.67, 6.77, 6.86, 6.94], "lower": [-0.99, -1.31, -1.61, -1.87, -2.09, -2.28, -2.43, -2.56, -2.67, -2.77, -2.86, -2.94]}}}, "partiesRaw": {"DEM": {"current": 5.9, "trend": 0, "aboveThreshold": true, "color": "#FF6600", "isGovernment": false, "isOpposition": true, "isCatholic": true, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [4.99, 4.9, 3.75, 2.38, 1.5, 1.25, 1.25, 2.4, 1.99, 2.3, 1.15, 3.32, 4.9, 3.45, 4.07, 3.87, 3.38, 4.37, 4.43, 4.15, 4.2, 4.63, 4.25, 3.98, 4.65, 5.4, 5.9], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "HLAS": {"current": 6.5, "trend": 0, "aboveThreshold": true, "color": "#003DA5", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [14.7, 15.03, 15.15, 15.58, 16.27, 16.1, 17.25, 15.37, 13.17, 13.35, 15.1, 13.1, 13.5, 12.9, 12.8, 11.87, 11.35, 11.2, 10.47, 10.0, 10.8, 11.27, 10.1, 9.62, 9.4, 8.7, 6.5], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "KDH": {"current": 5.3, "trend": 0, "aboveThreshold": true, "color": "#0066CC", "isGovernment": false, "isOpposition": true, "isCatholic": true, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [6.82, 6.73, 6.85, 7.1, 7.05, 7.15, 7.4, 6.6, 6.54, 6.75, 6.55, 6.25, 6.55, 6.55, 6.57, 6.63, 7.35, 7.2, 7.53, 7.25, 6.98, 6.37, 6.45, 6.45, 6.35, 5.92, 5.3], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "PS": {"current": 22.6, "trend": 0, "aboveThreshold": true, "color": "#6B2D5C", "isGovernment": false, "isOpposition": true, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [17.96, 19.03, 20.4, 20.25, 21.2, 20.6, 19.9, 21.63, 23.98, 21.98, 22.55, 22.65, 22.85, 22.88, 23.03, 23.83, 22.25, 22.3, 22.23, 21.78, 21.78, 21.23, 22.42, 22.5, 23.08, 23.02, 22.6], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "REP": {"current": 11.9, "trend": 0, "aboveThreshold": true, "color": "#1a1a1a", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [1.6, 0.5, 1.4, 0.45, 0.38, 1.75, 0.7, 2.23, 1.92, 0.92, 2.05, 3.42, 7.1, 5.95, 7.77, 2.67, 5.72, 7.5, 8.13, 6.78, 7.52, 9.37, 8.22, 3.75, 8.4, 8.18, 11.9], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "SLOV": {"current": 7.6, "trend": 0, "aboveThreshold": true, "color": "#00A651", "isGovernment": false, "isOpposition": true, "isCatholic": true, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [0.84, 0.87, 0.5, 1.2, 1.52, 2.7, 0.85, 3.1, 2.77, 1.58, 0.65, 3.98, 5.55, 4.02, 5.97, 2.6, 5.92, 6.67, 7.6, 6.75, 6.98, 7.63, 6.92, 4.25, 6.45, 6.9, 7.6], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "SMER": {"current": 18.3, "trend": 0, "aboveThreshold": true, "color": "#E31E24", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [22.95, 23.93, 24.15, 22.62, 22.2, 21.85, 21.15, 22.57, 23.79, 24.22, 23.0, 23.88, 20.9, 20.9, 20.07, 21.03, 21.6, 21.57, 19.9, 19.58, 19.32, 19.03, 18.58, 18.52, 17.82, 16.92, 18.3], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "Aliancia": {"current": 3.7, "trend": 0, "aboveThreshold": false, "color": "#009933", "isGovernment": false, "isOpposition": false, "isCatholic": false, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [3.55, 3.5, 4.07, 4.0, 3.7, 4.03, 4.03, 4.17, 4.47, 3.73, 3.8, 3.77, 3.5, 4.17, 4.5, 3.7], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "ROD": {"current": 3.9, "trend": 0, "aboveThreshold": false, "color": "#8B0000", "isGovernment": false, "isOpposition": false, "isCatholic": true, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [3.9, 3.9, 3.45, 3.8, 2.8, 3.3, 3.3, 3.7, 3.43, 3.17, 3.8, 3.0, 3.5, 3.2, 2.65, 3.9], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "SAS": {"current": 6.3, "trend": 0, "aboveThreshold": true, "color": "#FFD700", "isGovernment": false, "isOpposition": true, "isCatholic": false, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [6.25, 6.35, 6.53, 5.83, 6.3, 6.37, 6.37, 6.73, 6.5, 6.57, 7.0, 7.07, 7.7, 6.43, 6.77, 6.3], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "SNS": {"current": 2.2, "trend": 0, "aboveThreshold": false, "color": "#003366", "isGovernment": true, "isOpposition": false, "isCatholic": false, "dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [4.2, 4.8, 3.87, 4.15, 2.0, 3.5, 3.5, 4.0, 3.45, 4.0, 4.0, 3.6, 3.5, 4.25, 4.4, 2.2], "uncertainties": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}, "PRAV": {"current": 2.0, "trend": 0, "aboveThreshold": false, "color": "#666666", "isGovernment": false, "isOpposition": false, "isCatholic": false, "dates": ["2025-11-15"], "values": [2.0], "uncertainties": [0], "forecast": {"dates": [], "values": [], "upper": [], "lower": []}}}, "blocks": {"government": {"dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [39.25, 39.41, 40.03, 39.17, 38.94, 39.18, 39.12, 39.7, 39.23, 38.81, 39.26, 44.4, 45.21, 44.33, 44.58, 41.4, 41.59, 42.43, 42.36, 40.81, 41.13, 42.14, 41.22, 37.92, 38.61, 38.11, 37.74], "upper": [44.05, 42.76, 43.34, 41.93, 41.58, 42.22, 42.38, 42.68, 41.89, 41.36, 42.26, 47.89, 48.96, 47.54, 47.92, 44.99, 44.92, 45.77, 45.76, 44.04, 44.07, 45.36, 44.41, 41.27, 41.83, 41.3, 41.7], "lower": [34.45, 36.05, 36.73, 36.41, 36.31, 36.13, 35.86, 36.73, 36.58, 36.25, 36.26, 40.9, 41.47, 41.12, 41.24, 37.81, 38.26, 39.08, 38.96, 37.58, 38.18, 38.91, 38.04, 34.57, 35.38, 34.92, 33.79], "forecast": {"dates": ["2026-01-14", "2026-02-13", "2026-03-15", "2026-04-14", "2026-05-14", "2026-06-13", "2026-07-13", "2026-08-12", "2026-09-11", "2026-10-11", "2026-11-10", "2026-12-10"], "values": [37.34, 37.05, 36.83, 36.68, 36.57, 36.49, 36.43, 36.39, 36.36, 36.34, 36.33, 36.31]}}, "opposition": {"dates": ["2023-09-15", "2023-11-15", "2023-12-15", "2024-01-15", "2024-02-15", "2024-03-15", "2024-04-15", "2024-05-15", "2024-06-15", "2024-07-15", "2024-08-15", "2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-01-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [30.61, 31.29, 31.44, 31.14, 31.22, 31.43, 30.54, 32.31, 34.23, 33.56, 32.74, 41.2, 43.49, 43.79, 44.97, 44.44, 45.17, 46.29, 47.8, 47.36, 47.08, 47.21, 47.3, 45.89, 46.41, 47.34, 47.6], "upper": [36.15, 35.16, 35.26, 34.32, 34.27, 34.95, 34.3, 35.74, 37.29, 36.51, 36.2, 45.01, 47.47, 47.32, 48.57, 48.31, 48.68, 49.84, 51.43, 50.78, 50.22, 50.67, 50.69, 49.45, 49.81, 50.7, 51.91], "lower": [25.07, 27.41, 27.62, 27.95, 28.18, 27.91, 26.77, 28.88, 31.16, 30.61, 29.28, 37.38, 39.5, 40.27, 41.36, 40.56, 41.66, 42.74, 44.17, 43.95, 43.93, 43.76, 43.92, 42.32, 43.01, 43.97, 43.29], "forecast": {"dates": ["2026-01-14", "2026-02-13", "2026-03-15", "2026-04-14", "2026-05-14", "2026-06-13", "2026-07-13", "2026-08-12", "2026-09-11", "2026-10-11", "2026-11-10", "2026-12-10"], "values": [47.81, 47.97, 48.08, 48.16, 48.22, 48.26, 48.29, 48.31, 48.33, 48.34, 48.35, 48.35]}}}, "seats": {"government": {"dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [80, 76, 77, 72, 70, 71, 70, 70, 71, 71, 68, 69, 64, 62, 66], "forecast": {"dates": ["2026-01-14", "2026-02-13", "2026-03-15", "2026-04-14", "2026-05-14", "2026-06-13", "2026-07-13", "2026-08-12", "2026-09-11", "2026-10-11", "2026-11-10", "2026-12-10"], "values": [57, 56, 56, 56, 56, 56, 55, 55, 55, 55, 55, 55]}}, "opposition": {"dates": ["2024-09-15", "2024-10-15", "2024-11-15", "2024-12-15", "2025-02-15", "2025-03-15", "2025-04-15", "2025-05-15", "2025-06-15", "2025-07-15", "2025-08-15", "2025-09-15", "2025-10-15", "2025-11-15", "2025-12-15"], "values": [70, 83, 80, 73, 79, 84, 79, 79, 78, 84, 88, 81, 85, 87, 84], "forecast": {"dates": ["2026-01-14", "2026-02-13", "2026-03-15", "2026-04-14", "2026-05-14", "2026-06-13", "2026-07-13", "2026-08-12", "2026-09-11", "2026-10-11", "2026-11-10", "2026-12-10"], "values": [81, 81, 81, 81, 81, 82, 82, 82, 82, 82, 82, 82]}}}, "correlations": {"matrix": [[1.0, -0.72, -0.43, 0.08, 0.7, 0.04, 0.62, -0.54], [-0.72, 1.0, 0.48, -0.55, -0.84, -0.33, -0.84, 0.76], [-0.43, 0.48, 1.0, -0.38, -0.4, -0.03, -0.24, 0.33], [0.08, -0.55, -0.38, 1.0, 0.48, -0.35, 0.5, -0.37], [0.7, -0.84, -0.4, 0.48, 1.0, -0.08, 0.95, -0.8], [0.04, -0.33, -0.03, -0.35, -0.08, 1.0, 0.07, -0.46], [0.62, -0.84, -0.24, 0.5, 0.95, 0.07, 1.0, -0.78], [-0.54, 0.76, 0.33, -0.37, -0.8, -0.46, -0.78, 1.0]], "parties": ["DEM", "HLAS", "KDH", "PS", "REP", "SAS", "SLOV", "SMER"], "correlations": [{"party1": "REP", "party2": "SLOV", "value": 0.95, "type": "positive"}, {"party1": "HLAS", "party2": "REP", "value": -0.84, "type": "negative"}, {"party1": "HLAS", "party2": "SLOV", "value": -0.84, "type": "negative"}, {"party1": "REP", "party2": "SMER", "value": -0.8, "type": "negative"}, {"party1": "SLOV", "party2": "SMER", "value": -0.78, "type": "negative"}, {"party1": "HLAS", "party2": "SMER", "value": 0.76, "type": "positive"}, {"party1": "DEM", "party2": "HLAS", "value": -0.72, "type": "negative"}, {"party1": "DEM", "party2": "REP", "value": 0.7, "type": "positive"}, {"party1": "DEM", "party2": "SLOV", "value": 0.62, "type": "positive"}, {"party1": "HLAS", "party2": "PS", "value": -0.55, "type": "negative"}]}, "volatility": [{"party": "PS", "mean": 22.0, "std": 1.6, "range": 9.9, "cv": 7.2, "color": "#6B2D5C", "stability": "high"}, {"party": "SAS", "mean": 6.6, "std": 0.57, "range": 3.1, "cv": 8.7, "color": "#FFD700", "stability": "high"}, {"party": "SMER", "mean": 21.0, "std": 2.32, "range": 9.4, "cv": 11.0, "color": "#E31E24", "stability": "medium"}, {"party": "KDH", "mean": 6.7, "std": 0.75, "range": 3.4, "cv": 11.1, "color": "#0066CC", "stability": "medium"}, {"party": "HLAS", "mean": 12.4, "std": 2.79, "range": 11.5, "cv": 22.5, "color": "#003DA5", "stability": "low"}], "scenarios": [{"name": "HLAS below threshold", "description": "What if HLAS falls below the 5% threshold?", "changes": [{"party": "HLAS", "oldPct": 8.1, "newPct": 4.5, "pctChange": -3.6, "oldSeats": 15, "newSeats": 0, "seatChange": -15}], "seats": [{"party": "PS", "seats": 47, "change": 5, "color": "#6B2D5C"}, {"party": "SMER", "seats": 35, "change": 3, "color": "#E31E24"}, {"party": "REP", "seats": 18, "change": 2, "color": "#1a1a1a"}, {"party": "SLOV", "seats": 14, "change": 2, "color": "#00A651"}, {"party": "SAS", "seats": 13, "change": 1, "color": "#FFD700"}, {"party": "KDH", "seats": 12, "change": 1, "color": "#0066CC"}, {"party": "DEM", "seats": 11, "change": 1, "color": "#FF6600"}], "blocks": {"government": {"seats": 53, "change": -10, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 97, "change": 10, "hasMajority": true}}}, {"name": "SNS enters parliament", "description": "What if SNS rises above the 5% threshold?", "changes": [{"party": "SNS", "oldPct": 3.6, "newPct": 5.5, "pctChange": 1.9, "oldSeats": 0, "newSeats": 9, "seatChange": 9}], "seats": [{"party": "PS", "seats": 40, "change": -2, "color": "#6B2D5C"}, {"party": "SMER", "seats": 30, "change": -2, "color": "#E31E24"}, {"party": "REP", "seats": 15, "change": -1, "color": "#1a1a1a"}, {"party": "HLAS", "seats": 14, "change": -1, "color": "#003DA5"}, {"party": "SLOV", "seats": 12, "change": 0, "color": "#00A651"}, {"party": "SAS", "seats": 11, "change": -1, "color": "#FFD700"}, {"party": "KDH", "seats": 10, "change": -1, "color": "#0066CC"}, {"party": "DEM", "seats": 9, "change": -1, "color": "#FF6600"}, {"party": "SNS", "seats": 9, "change": 9, "color": "#003366"}], "blocks": {"government": {"seats": 68, "change": 5, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 82, "change": -5, "hasMajority": true}}}, {"name": "HLAS voters to SMER", "description": "3% of HLAS voters switch to SMER", "changes": [{"party": "HLAS", "oldPct": 8.1, "newPct": 5.1, "pctChange": -3.0, "oldSeats": 15, "newSeats": 9, "seatChange": -6}, {"party": "SMER", "oldPct": 17.1, "newPct": 20.1, "pctChange": 3.0, "oldSeats": 32, "newSeats": 37, "seatChange": 5}], "seats": [{"party": "PS", "seats": 42, "change": 0, "color": "#6B2D5C"}, {"party": "SMER", "seats": 37, "change": 5, "color": "#E31E24"}, {"party": "REP", "seats": 16, "change": 0, "color": "#1a1a1a"}, {"party": "SLOV", "seats": 13, "change": 1, "color": "#00A651"}, {"party": "SAS", "seats": 12, "change": 0, "color": "#FFD700"}, {"party": "KDH", "seats": 11, "change": 0, "color": "#0066CC"}, {"party": "DEM", "seats": 10, "change": 0, "color": "#FF6600"}, {"party": "HLAS", "seats": 9, "change": -6, "color": "#003DA5"}], "blocks": {"government": {"seats": 62, "change": -1, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 88, "change": 1, "hasMajority": true}}}, {"name": "REP surge", "description": "Republika gains 3 percentage points", "changes": [{"party": "REP", "oldPct": 8.9, "newPct": 11.9, "pctChange": 3.0, "oldSeats": 16, "newSeats": 21, "seatChange": 5}], "seats": [{"party": "PS", "seats": 41, "change": -1, "color": "#6B2D5C"}, {"party": "SMER", "seats": 30, "change": -2, "color": "#E31E24"}, {"party": "REP", "seats": 21, "change": 5, "color": "#1a1a1a"}, {"party": "HLAS", "seats": 14, "change": -1, "color": "#003DA5"}, {"party": "SAS", "seats": 12, "change": 0, "color": "#FFD700"}, {"party": "SLOV", "seats": 12, "change": 0, "color": "#00A651"}, {"party": "DEM", "seats": 10, "change": 0, "color": "#FF6600"}, {"party": "KDH", "seats": 10, "change": -1, "color": "#0066CC"}], "blocks": {"government": {"seats": 65, "change": 2, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 85, "change": -2, "hasMajority": true}}}, {"name": "PS-DEM coalition", "description": "PS and Democrats run on a combined list", "changes": [{"party": "PS", "oldPct": 23.0, "newPct": 28.5, "pctChange": 5.5, "oldSeats": 42, "newSeats": 52, "seatChange": 10}, {"party": "DEM", "oldPct": 5.4, "newPct": 0.0, "pctChange": -5.4, "oldSeats": 10, "newSeats": 0, "seatChange": -10}], "seats": [{"party": "PS", "seats": 52, "change": 10, "color": "#6B2D5C"}, {"party": "SMER", "seats": 32, "change": 0, "color": "#E31E24"}, {"party": "REP", "seats": 16, "change": 0, "color": "#1a1a1a"}, {"party": "HLAS", "seats": 15, "change": 0, "color": "#003DA5"}, {"party": "SAS", "seats": 12, "change": 0, "color": "#FFD700"}, {"party": "SLOV", "seats": 12, "change": 0, "color": "#00A651"}, {"party": "KDH", "seats": 11, "change": 0, "color": "#0066CC"}], "blocks": {"government": {"seats": 63, "change": 0, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 87, "change": 0, "hasMajority": true}}}, {"name": "Government collapse", "description": "SMER drops 5%, split between PS and REP", "changes": [{"party": "SMER", "oldPct": 17.1, "newPct": 12.1, "pctChange": -5.0, "oldSeats": 32, "newSeats": 22, "seatChange": -10}, {"party": "PS", "oldPct": 23.0, "newPct": 25.5, "pctChange": 2.5, "oldSeats": 42, "newSeats": 47, "seatChange": 5}, {"party": "REP", "oldPct": 8.9, "newPct": 11.4, "pctChange": 2.5, "oldSeats": 16, "newSeats": 21, "seatChange": 5}], "seats": [{"party": "PS", "seats": 47, "change": 5, "color": "#6B2D5C"}, {"party": "SMER", "seats": 22, "change": -10, "color": "#E31E24"}, {"party": "REP", "seats": 21, "change": 5, "color": "#1a1a1a"}, {"party": "HLAS", "seats": 15, "change": 0, "color": "#003DA5"}, {"party": "SAS", "seats": 12, "change": 0, "color": "#FFD700"}, {"party": "SLOV", "seats": 12, "change": 0, "color": "#00A651"}, {"party": "KDH", "seats": 11, "change": 0, "color": "#0066CC"}, {"party": "DEM", "seats": 10, "change": 0, "color": "#FF6600"}], "blocks": {"government": {"seats": 58, "change": -5, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 92, "change": 5, "hasMajority": true}}}, {"name": "Opposition unity", "description": "PS, SAS, DEM, KDH form unified opposition bloc (simplified as PS gaining their support)", "changes": [{"party": "PS", "oldPct": 23.0, "newPct": 40.0, "pctChange": 17.0, "oldSeats": 42, "newSeats": 74, "seatChange": 32}, {"party": "SAS", "oldPct": 6.7, "newPct": 0.0, "pctChange": -6.7, "oldSeats": 12, "newSeats": 0, "seatChange": -12}, {"party": "DEM", "oldPct": 5.4, "newPct": 0.0, "pctChange": -5.4, "oldSeats": 10, "newSeats": 0, "seatChange": -10}, {"party": "KDH", "oldPct": 5.8, "newPct": 0.0, "pctChange": -5.8, "oldSeats": 11, "newSeats": 0, "seatChange": -11}], "seats": [{"party": "PS", "seats": 74, "change": 32, "color": "#6B2D5C"}, {"party": "SMER", "seats": 32, "change": 0, "color": "#E31E24"}, {"party": "REP", "seats": 16, "change": 0, "color": "#1a1a1a"}, {"party": "HLAS", "seats": 15, "change": 0, "color": "#003DA5"}, {"party": "SLOV", "seats": 13, "change": 1, "color": "#00A651"}], "blocks": {"government": {"seats": 63, "change": 0, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 87, "change": 0, "hasMajority": true}}}, {"name": "KDH and Hlas out", "description": "KDH and HLAS out of parlament", "changes": [{"party": "HLAS", "oldPct": 8.1, "newPct": 4.8, "pctChange": -3.3, "oldSeats": 15, "newSeats": 0, "seatChange": -15}, {"party": "KDH", "oldPct": 5.8, "newPct": 4.9, "pctChange": -0.9, "oldSeats": 11, "newSeats": 0, "seatChange": -11}, {"party": "DEM", "oldPct": 5.4, "newPct": 6.9, "pctChange": 1.5, "oldSeats": 10, "newSeats": 14, "seatChange": 4}, {"party": "SLOV", "oldPct": 6.8, "newPct": 8.8, "pctChange": 2.0, "oldSeats": 12, "newSeats": 19, "seatChange": 7}], "seats": [{"party": "PS", "seats": 48, "change": 6, "color": "#6B2D5C"}, {"party": "SMER", "seats": 36, "change": 4, "color": "#E31E24"}, {"party": "REP", "seats": 19, "change": 3, "color": "#1a1a1a"}, {"party": "SLOV", "seats": 19, "change": 7, "color": "#00A651"}, {"party": "DEM", "seats": 14, "change": 4, "color": "#FF6600"}, {"party": "SAS", "seats": 14, "change": 2, "color": "#FFD700"}], "blocks": {"government": {"seats": 55, "change": -8, "hasMajority": false, "hasConstitutional": false}, "opposition": {"seats": 95, "change": 8, "hasMajority": true}}}], "translations": {"en": {"title": "Slovak Election Poll Analysis", "subtitle": "Interactive Kalman-filtered trends and statistical analysis", "threshold": "Threshold", "forecast": "Forecast", "months": "months", "trends": "Trends", "blocks": "Blocks", "seats": "Seats", "scenarios": "Scenarios", "correlations": "Correlations", "volatility": "Volatility", "partyTrends": "Party Trends", "kalmanFiltered": "Kalman Filtered", "rawData": "Raw Data", "clickToHighlight": "Click on a party in the legend to highlight it. Dashed lines show forecasts with 95% confidence intervals.", "coalitionBlocks": "Coalition Blocks", "government": "Government", "opposition": "Opposition", "parliamentSeats": "Parliament Seats", "simpleMajority": "Simple majority", "constitutionalMajority": "Constitutional majority (2/3)", "whatIfScenarios": "What-If Scenarios", "clickScenario": "Click on a scenario to see detailed seat projections. These are pre-calculated based on current polling data.", "partyCorrelations": "Party Correlations", "pollingVolatility": "Polling Volatility", "party": "Party", "mean": "Mean", "stdDev": "Std Dev", "cv": "CV", "stability": "Stability", "high": "High", "medium": "Medium", "low": "Low", "before": "Before", "after": "After", "changes": "Changes", "allSeats": "All Seats", "hasMajority": "Has Majority", "noMajority": "No Majority", "govMajority": "Gov Majority", "oppLeads": "Opp Leads", "notableCorrelations": "Notable Correlations", "moveTogether": "move together", "inverseRelationship": "inverse relationship", "dataSources": "Data sources: Wikipedia opinion polling, various Slovak polling agencies", "analysisPowered": "Analysis powered by Kalman filtering", "downloadJson": "Download JSON Data", "generatedWith": "Generated with", "updated": "Updated", "useKalman": "Use Kalman Filter"}, "sk": {"title": "Anal\u00fdza volebn\u00fdch prieskumov SR", "subtitle": "Interakt\u00edvne trendy s Kalmanov\u00fdm filtrom a \u0161tatistick\u00e1 anal\u00fdza", "threshold": "Prah", "forecast": "Predpove\u010f", "months": "mesiacov", "trends": "Trendy", "blocks": "Bloky", "seats": "Mand\u00e1ty", "scenarios": "Scen\u00e1re", "correlations": "Korel\u00e1cie", "volatility": "Volatilita", "partyTrends": "Trendy str\u00e1n", "kalmanFiltered": "Kalmanov filter", "rawData": "Surov\u00e9 d\u00e1ta", "clickToHighlight": "Kliknite na stranu v legende pre zv\u00fdraznenie. Preru\u0161ovan\u00e9 \u010diary zobrazuj\u00fa predpovede s 95% intervalom spo\u013eahlivosti.", "coalitionBlocks": "Koali\u010dn\u00e9 bloky", "government": "Vl\u00e1da", "opposition": "Opoz\u00edcia", "parliamentSeats": "Mand\u00e1ty v parlamente", "simpleMajority": "Jednoduch\u00e1 v\u00e4\u010d\u0161ina", "constitutionalMajority": "\u00dastavn\u00e1 v\u00e4\u010d\u0161ina (2/3)", "whatIfScenarios": "\u010co ak scen\u00e1re", "clickScenario": "Kliknite na scen\u00e1r pre zobrazenie detailn\u00fdch projekci\u00ed mand\u00e1tov. Tieto s\u00fa prepo\u010d\u00edtan\u00e9 na z\u00e1klade aktu\u00e1lnych prieskumov.", "partyCorrelations": "Korel\u00e1cie str\u00e1n", "pollingVolatility": "Volatilita prieskumov", "party": "Strana", "mean": "Priemer", "stdDev": "\u0160td. odch.", "cv": "KV", "stability": "Stabilita", "high": "Vysok\u00e1", "medium": "Stredn\u00e1", "low": "N\u00edzka", "before": "Pred", "after": "Po", "changes": "Zmeny", "allSeats": "V\u0161etky mand\u00e1ty", "hasMajority": "M\u00e1 v\u00e4\u010d\u0161inu", "noMajority": "Nem\u00e1 v\u00e4\u010d\u0161inu", "govMajority": "V\u00e4\u010d\u0161ina vl\u00e1dy", "oppLeads": "Vedie opoz\u00edcia", "notableCorrelations": "V\u00fdznamn\u00e9 korel\u00e1cie", "moveTogether": "pohybuj\u00fa sa spolu", "inverseRelationship": "inverzn\u00fd vz\u0165ah", "dataSources": "Zdroje d\u00e1t: Wikipedia, r\u00f4zne slovensk\u00e9 agent\u00fary", "analysisPowered": "Anal\u00fdza pomocou Kalmanovho filtra", "downloadJson": "Stiahnu\u0165 JSON d\u00e1ta", "generatedWith": "Generovan\u00e9 pomocou", "updated": "Aktualizovan\u00e9", "useKalman": "Pou\u017ei\u0165 Kalmanov filter"}}, "config": {"partyColors": {"PS": "#6B2D5C", "SMER": "#E31E24", "HLAS": "#003DA5", "REP": "#1a1a1a", "SLOV": "#00A651", "SAS": "#FFD700", "KDH": "#0066CC", "DEM": "#FF6600", "SNS": "#003366", "Aliancia": "#009933", "ROD": "#8B0000"}, "governmentParties": ["SMER", "HLAS", "SNS", "REP"], "oppositionParties": ["PS", "SAS", "DEM", "SLOV", "KDH"], "catholicParties": ["KDH", "DEM", "SLOV", "ROD"]}};

        // State
        let highlightedParty = null;
        let currentThreshold = DATA.meta.defaultThreshold;
        let currentForecast = DATA.meta.defaultForecast;
        let currentLang = localStorage.getItem('sk-polls-lang') || 'en';
        let useKalman = localStorage.getItem('sk-polls-kalman') !== 'false';

        // Charts
        let trendsChart, blocksChart, seatsChart;

        // Translation function
        function t(key) {
            return DATA.translations[currentLang][key] || DATA.translations['en'][key] || key;
        }

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('sk-polls-lang', lang);

            // Update button states
            document.getElementById('langEN').classList.toggle('active', lang === 'en');
            document.getElementById('langSK').classList.toggle('active', lang === 'sk');

            // Update all translated elements
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                el.textContent = t(key);
            });

            // Update dynamic content
            updateTranslatedContent();
        }

        function updateTranslatedContent() {
            // Update header
            document.querySelector('header h1').textContent = 'üá∏üá∞ ' + t('title');
            document.querySelector('header .subtitle').textContent = t('subtitle');

            // Update card headers
            document.querySelector('#trends .card-header').innerHTML = `üìà ${t('partyTrends')} <span class="badge">${useKalman ? t('kalmanFiltered') : t('rawData')}</span>`;
            document.querySelector('#blocks .card-header').innerHTML = `‚öñÔ∏è ${t('coalitionBlocks')}`;
            document.querySelector('#seats .card-header').innerHTML = `üèõÔ∏è ${t('parliamentSeats')}`;
            document.querySelector('#scenarios .card-header').innerHTML = `üé≠ ${t('whatIfScenarios')} <span class="badge" id="scenarioCount">${DATA.scenarios.length} ${t('scenarios').toLowerCase()}</span>`;
            document.querySelector('#correlations .card-header').textContent = 'üîó ' + t('partyCorrelations');
            document.querySelector('#volatility .card-header').textContent = 'üìä ' + t('pollingVolatility');

            // Update info boxes
            document.querySelector('#trends .info-box').textContent = t('clickToHighlight');
            document.querySelector('#scenarios .info-box').textContent = t('clickScenario');
            document.querySelector('#seats .info-box').innerHTML = `<strong>76 ${t('seats').toLowerCase()}</strong> = ${t('simpleMajority')} | <strong>90 ${t('seats').toLowerCase()}</strong> = ${t('constitutionalMajority')}`;

            // Update block legend
            document.querySelector('.block-legend').innerHTML = `
                <div class="block-legend-item">
                    <div class="block-legend-color" style="background: var(--gov-color);"></div>
                    <span><strong>${t('government')}:</strong> SMER + HLAS + SNS + REP</span>
                </div>
                <div class="block-legend-item">
                    <div class="block-legend-color" style="background: var(--opp-color);"></div>
                    <span><strong>${t('opposition')}:</strong> PS + SAS + DEM + SLOV + KDH</span>
                </div>
            `;

            // Update volatility table header
            const volHeader = document.querySelector('#volatilityTable thead tr');
            volHeader.innerHTML = `
                <th>${t('party')}</th>
                <th>${t('mean')}</th>
                <th>${t('stdDev')}</th>
                <th>${t('cv')}</th>
                <th>${t('stability')}</th>
            `;

            // Update footer
            document.querySelector('footer').innerHTML = `
                <p>${t('dataSources')}</p>
                <p>${t('analysisPowered')} | <a href="data.json">${t('downloadJson')}</a></p>
                <p>${t('generatedWith')} <a href="https://github.com/anthropics/claude-code" target="_blank">Claude Code</a></p>
            `;

            // Re-render dynamic elements
            renderScenarios();
            renderCorrelations();
            renderVolatility();
        }

        function getActivePartyData() {
            return useKalman ? DATA.parties : DATA.partiesRaw;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Set meta info
            document.getElementById('dateRange').textContent =
                `üìÖ ${DATA.meta.dateRange.start} - ${DATA.meta.dateRange.end}`;
            document.getElementById('lastUpdated').textContent =
                `üïê ${t('updated')}: ${DATA.meta.generatedAt}`;

            // Initialize controls
            document.getElementById('thresholdSlider').value = currentThreshold;
            document.getElementById('thresholdValue').textContent = currentThreshold + '%';
            document.getElementById('forecastSelect').value = currentForecast;
            document.getElementById('kalmanToggle').checked = useKalman;

            // Set initial language
            setLanguage(currentLang);

            // Event listeners
            document.getElementById('thresholdSlider').addEventListener('input', (e) => {
                currentThreshold = parseFloat(e.target.value);
                document.getElementById('thresholdValue').textContent = currentThreshold + '%';
                updateCharts();
            });

            document.getElementById('forecastSelect').addEventListener('change', (e) => {
                currentForecast = parseInt(e.target.value);
                renderTrendsChart();
                renderBlocksChart();
                renderSeatsChart();
            });

            document.getElementById('kalmanToggle').addEventListener('change', (e) => {
                useKalman = e.target.checked;
                localStorage.setItem('sk-polls-kalman', useKalman);
                document.querySelector('#trends .card-header .badge').textContent = useKalman ? t('kalmanFiltered') : t('rawData');
                renderTrendsChart();
                renderBlocksChart();
                renderSeatsChart();
            });

            // Render everything
            renderTrendsChart();
            renderBlocksChart();
            renderSeatsChart();
            renderScenarios();
            renderCorrelations();
            renderVolatility();
        });

        function getVisibleParties() {
            const partyData = getActivePartyData();
            return Object.entries(partyData)
                .filter(([_, data]) => data.current >= currentThreshold)
                .sort((a, b) => b[1].current - a[1].current);
        }

        function renderTrendsChart() {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            const parties = getVisibleParties();

            const datasets = [];

            parties.forEach(([party, data]) => {
                // Confidence band (only for Kalman mode when party is highlighted or no highlight)
                if (useKalman && data.uncertainties && (!highlightedParty || highlightedParty === party)) {
                    // Upper bound
                    datasets.push({
                        label: party + ' (upper)',
                        data: data.dates.map((d, i) => ({ x: d, y: data.values[i] + 1.96 * data.uncertainties[i] })),
                        borderColor: 'transparent',
                        backgroundColor: 'transparent',
                        pointRadius: 0,
                        fill: false,
                        tension: 0.3,
                    });
                    // Lower bound with fill to upper
                    datasets.push({
                        label: party + ' (lower)',
                        data: data.dates.map((d, i) => ({ x: d, y: data.values[i] - 1.96 * data.uncertainties[i] })),
                        borderColor: 'transparent',
                        backgroundColor: data.color + '15',
                        pointRadius: 0,
                        fill: '-1',  // Fill to previous dataset
                        tension: 0.3,
                    });
                }

                // Main line - smooth for Kalman, straight for raw
                datasets.push({
                    label: party,
                    data: data.dates.map((d, i) => ({ x: d, y: data.values[i] })),
                    borderColor: data.color,
                    backgroundColor: data.color + '20',
                    borderWidth: highlightedParty === party ? 4 : 2,
                    pointRadius: highlightedParty === party ? 4 : (useKalman ? 2 : 4),
                    tension: useKalman ? 0.3 : 0,  // Smooth curve for Kalman, straight lines for raw
                    fill: false,
                    hidden: highlightedParty && highlightedParty !== party,
                });

                // Forecast line (only with Kalman filter)
                if (useKalman && data.forecast.dates.length > 0) {
                    const lastDate = data.dates[data.dates.length - 1];
                    const lastValue = data.values[data.values.length - 1];

                    // Filter forecast by selected months
                    const forecastDates = data.forecast.dates.slice(0, currentForecast);
                    const forecastValues = data.forecast.values.slice(0, currentForecast);

                    if (forecastDates.length > 0) {
                        datasets.push({
                            label: party + ' (forecast)',
                            data: [
                                { x: lastDate, y: lastValue },
                                ...forecastDates.map((d, i) => ({ x: d, y: forecastValues[i] }))
                            ],
                            borderColor: data.color,
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            tension: 0.3,
                            fill: false,
                            hidden: highlightedParty && highlightedParty !== party,
                        });
                    }
                }
            });

            if (trendsChart) {
                trendsChart.destroy();
            }

            trendsChart = new Chart(ctx, {
                type: 'line',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index',
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => {
                                    const label = ctx.dataset.label.replace(' (forecast)', '');
                                    return `${label}: ${ctx.parsed.y.toFixed(1)}%`;
                                }
                            }
                        },
                        annotation: {
                            annotations: {
                                threshold: {
                                    type: 'line',
                                    yMin: 5,
                                    yMax: 5,
                                    borderColor: 'rgba(128, 128, 128, 0.5)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {
                                        content: '5% threshold',
                                        enabled: true,
                                        position: 'end',
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: { unit: 'month' },
                            title: { display: true, text: 'Date' }
                        },
                        y: {
                            min: 0,
                            max: 30,
                            title: { display: true, text: 'Poll Percentage (%)' }
                        }
                    }
                }
            });

            // Render legend
            renderPartyLegend(parties);
        }

        function renderPartyLegend(parties) {
            const container = document.getElementById('partyLegend');
            container.innerHTML = '';

            parties.forEach(([party, data]) => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                if (highlightedParty === party) item.classList.add('highlighted');
                if (highlightedParty && highlightedParty !== party) item.classList.add('dimmed');

                item.style.background = data.color + '20';

                const trendClass = data.trend > 0.05 ? 'up' : data.trend < -0.05 ? 'down' : '';
                const trendIcon = data.trend > 0.05 ? '‚Üë' : data.trend < -0.05 ? '‚Üì' : '‚Üí';

                let blockBadge = '';
                if (data.isGovernment) blockBadge = '<span class="block-indicator gov">GOV</span>';
                else if (data.isOpposition) blockBadge = '<span class="block-indicator opp">OPP</span>';

                item.innerHTML = `
                    <span class="legend-color" style="background: ${data.color}"></span>
                    <span>${party}</span>
                    <span class="trend ${trendClass}">${data.current}% ${trendIcon}</span>
                    ${blockBadge}
                `;

                item.addEventListener('click', () => {
                    highlightedParty = highlightedParty === party ? null : party;
                    renderTrendsChart();
                });

                container.appendChild(item);
            });
        }

        function renderBlocksChart() {
            const ctx = document.getElementById('blocksChart').getContext('2d');
            const blocks = DATA.blocks;

            // Filter forecast by selected months
            const govForecastDates = blocks.government.forecast.dates.slice(0, currentForecast);
            const govForecastValues = blocks.government.forecast.values.slice(0, currentForecast);
            const oppForecastDates = blocks.opposition.forecast.dates.slice(0, currentForecast);
            const oppForecastValues = blocks.opposition.forecast.values.slice(0, currentForecast);

            const datasets = [
                {
                    label: t('government'),
                    data: blocks.government.dates.map((d, i) => ({ x: d, y: blocks.government.values[i] })),
                    borderColor: 'var(--gov-color)',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: useKalman ? 0.3 : 0,
                },
                {
                    label: t('opposition'),
                    data: blocks.opposition.dates.map((d, i) => ({ x: d, y: blocks.opposition.values[i] })),
                    borderColor: 'var(--opp-color)',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: useKalman ? 0.3 : 0,
                }
            ];

            // Add forecast lines only when Kalman is enabled
            if (useKalman && govForecastDates.length > 0) {
                datasets.push({
                    label: t('government') + ' (forecast)',
                    data: [
                        { x: blocks.government.dates[blocks.government.dates.length - 1],
                          y: blocks.government.values[blocks.government.values.length - 1] },
                        ...govForecastDates.map((d, i) => ({ x: d, y: govForecastValues[i] }))
                    ],
                    borderColor: 'var(--gov-color)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    pointRadius: 0,
                    fill: false,
                    tension: 0.3,
                });
                datasets.push({
                    label: t('opposition') + ' (forecast)',
                    data: [
                        { x: blocks.opposition.dates[blocks.opposition.dates.length - 1],
                          y: blocks.opposition.values[blocks.opposition.values.length - 1] },
                        ...oppForecastDates.map((d, i) => ({ x: d, y: oppForecastValues[i] }))
                    ],
                    borderColor: 'var(--opp-color)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    pointRadius: 0,
                    fill: false,
                    tension: 0.3,
                });
            }

            if (blocksChart) blocksChart.destroy();

            blocksChart = new Chart(ctx, {
                type: 'line',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                filter: (item) => !item.text.includes('forecast')
                            }
                        },
                        annotation: {
                            annotations: {
                                majority: {
                                    type: 'line',
                                    yMin: 50,
                                    yMax: 50,
                                    borderColor: 'rgba(39, 174, 96, 0.7)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                }
                            }
                        }
                    },
                    scales: {
                        x: { type: 'time', time: { unit: 'month' } },
                        y: { title: { display: true, text: 'Combined Percentage (%)' } }
                    }
                }
            });
        }

        function renderSeatsChart() {
            const ctx = document.getElementById('seatsChart').getContext('2d');
            const seats = DATA.seats;

            // Filter forecast by selected months
            const govForecastDates = seats.government.forecast.dates.slice(0, currentForecast);
            const govForecastValues = seats.government.forecast.values.slice(0, currentForecast);
            const oppForecastDates = seats.opposition.forecast.dates.slice(0, currentForecast);
            const oppForecastValues = seats.opposition.forecast.values.slice(0, currentForecast);

            const datasets = [
                {
                    label: t('government'),
                    data: seats.government.dates.map((d, i) => ({ x: d, y: seats.government.values[i] })),
                    borderColor: 'var(--gov-color)',
                    backgroundColor: 'rgba(231, 76, 60, 0.3)',
                    borderWidth: 3,
                    pointRadius: 4,
                    fill: true,
                    tension: useKalman ? 0.3 : 0,
                },
                {
                    label: t('opposition'),
                    data: seats.opposition.dates.map((d, i) => ({ x: d, y: seats.opposition.values[i] })),
                    borderColor: 'var(--opp-color)',
                    backgroundColor: 'rgba(52, 152, 219, 0.3)',
                    borderWidth: 3,
                    pointRadius: 4,
                    fill: true,
                    tension: useKalman ? 0.3 : 0,
                }
            ];

            // Add forecast lines only when Kalman is enabled
            if (useKalman && govForecastDates.length > 0) {
                datasets.push({
                    label: t('government') + ' (forecast)',
                    data: [
                        { x: seats.government.dates[seats.government.dates.length - 1],
                          y: seats.government.values[seats.government.values.length - 1] },
                        ...govForecastDates.map((d, i) => ({ x: d, y: govForecastValues[i] }))
                    ],
                    borderColor: 'var(--gov-color)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    pointRadius: 0,
                    fill: false,
                    tension: 0.3,
                });
                datasets.push({
                    label: t('opposition') + ' (forecast)',
                    data: [
                        { x: seats.opposition.dates[seats.opposition.dates.length - 1],
                          y: seats.opposition.values[seats.opposition.values.length - 1] },
                        ...oppForecastDates.map((d, i) => ({ x: d, y: oppForecastValues[i] }))
                    ],
                    borderColor: 'var(--opp-color)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    pointRadius: 0,
                    fill: false,
                    tension: 0.3,
                });
            }

            if (seatsChart) seatsChart.destroy();

            seatsChart = new Chart(ctx, {
                type: 'line',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        annotation: {
                            annotations: {
                                majority: {
                                    type: 'line',
                                    yMin: 76,
                                    yMax: 76,
                                    borderColor: 'rgba(39, 174, 96, 0.7)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: { content: 'Majority (76)', enabled: true }
                                },
                                constitutional: {
                                    type: 'line',
                                    yMin: 90,
                                    yMax: 90,
                                    borderColor: 'rgba(243, 156, 18, 0.7)',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: { content: 'Constitutional (90)', enabled: true }
                                }
                            }
                        }
                    },
                    scales: {
                        x: { type: 'time', time: { unit: 'month' } },
                        y: {
                            min: 0,
                            max: 160,
                            title: { display: true, text: 'Parliament Seats' }
                        }
                    }
                }
            });
        }

        function renderScenarios() {
            const container = document.getElementById('scenariosList');
            const scenarios = DATA.scenarios;

            container.innerHTML = scenarios.map((scenario, idx) => `
                <div class="scenario-card">
                    <div class="scenario-header" onclick="toggleScenario(${idx})">
                        <h4>${scenario.name}</h4>
                        <span>${scenario.blocks.government.hasMajority ? 'üî¥ ' + t('govMajority') : 'üîµ ' + t('oppLeads')}</span>
                    </div>
                    <div class="scenario-content" id="scenario-${idx}">
                        <p style="color: #666; margin-bottom: 15px;">${scenario.description}</p>

                        <h5 style="margin-bottom: 10px;">${t('changes')}:</h5>
                        <table>
                            <thead>
                                <tr>
                                    <th>${t('party')}</th>
                                    <th>${t('before')}</th>
                                    <th>${t('after')}</th>
                                    <th>Œî ${t('seats')}</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${scenario.changes.map(c => `
                                    <tr>
                                        <td><strong>${c.party}</strong></td>
                                        <td>${c.oldPct}%</td>
                                        <td>${c.newPct}%</td>
                                        <td class="${c.seatChange > 0 ? 'rising' : c.seatChange < 0 ? 'falling' : ''}">
                                            ${c.seatChange > 0 ? '+' : ''}${c.seatChange}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>

                        <div class="scenario-blocks">
                            <div class="scenario-block gov">
                                <div>${t('government')}</div>
                                <div class="seats">${scenario.blocks.government.seats}</div>
                                <div class="change ${scenario.blocks.government.change >= 0 ? 'rising' : 'falling'}">
                                    ${scenario.blocks.government.change >= 0 ? '+' : ''}${scenario.blocks.government.change} ${t('seats').toLowerCase()}
                                </div>
                                <div class="status">
                                    ${scenario.blocks.government.hasMajority ? '‚úÖ ' + t('hasMajority') : '‚ùå ' + t('noMajority')}
                                </div>
                            </div>
                            <div class="scenario-block opp">
                                <div>${t('opposition')}</div>
                                <div class="seats">${scenario.blocks.opposition.seats}</div>
                                <div class="change ${scenario.blocks.opposition.change >= 0 ? 'rising' : 'falling'}">
                                    ${scenario.blocks.opposition.change >= 0 ? '+' : ''}${scenario.blocks.opposition.change} ${t('seats').toLowerCase()}
                                </div>
                                <div class="status">
                                    ${scenario.blocks.opposition.hasMajority ? '‚úÖ ' + t('hasMajority') : ''}
                                </div>
                            </div>
                        </div>

                        <h5 style="margin: 15px 0 10px;">${t('allSeats')}:</h5>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            ${scenario.seats.map(s => `
                                <span style="background: ${s.color}20; border: 2px solid ${s.color}; padding: 4px 10px; border-radius: 15px; font-size: 0.85em;">
                                    ${s.party}: ${s.seats}
                                    ${s.change !== 0 ? `<span class="${s.change > 0 ? 'rising' : 'falling'}">(${s.change > 0 ? '+' : ''}${s.change})</span>` : ''}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleScenario(idx) {
            const content = document.getElementById(`scenario-${idx}`);
            content.classList.toggle('active');
        }

        function renderCorrelations() {
            const corr = DATA.correlations;

            if (corr.parties.length === 0) {
                document.getElementById('correlationMatrix').innerHTML = '<p>Not enough data for correlation analysis.</p>';
                return;
            }

            // Render matrix
            const n = corr.parties.length;
            const matrixContainer = document.getElementById('correlationMatrix');

            let gridStyle = `grid-template-columns: 50px repeat(${n}, 1fr);`;
            let html = `<div class="correlation-matrix" style="${gridStyle}">`;

            // Header row
            html += '<div></div>';
            corr.parties.forEach(p => {
                html += `<div class="correlation-label">${p}</div>`;
            });

            // Data rows
            corr.parties.forEach((p1, i) => {
                html += `<div class="correlation-label">${p1}</div>`;
                corr.parties.forEach((p2, j) => {
                    const val = corr.matrix[i][j];
                    const color = val > 0
                        ? `rgba(52, 152, 219, ${Math.abs(val)})`
                        : `rgba(231, 76, 60, ${Math.abs(val)})`;
                    const textColor = Math.abs(val) > 0.5 ? 'white' : 'black';
                    html += `<div class="correlation-cell" style="background: ${color}; color: ${textColor}">${val.toFixed(2)}</div>`;
                });
            });

            html += '</div>';
            matrixContainer.innerHTML = html;

            // Render list
            const listContainer = document.getElementById('correlationList');
            if (corr.correlations.length > 0) {
                html = `<div style="margin-top: 20px;"><h5>${t('notableCorrelations')}:</h5><ul style="margin-top: 10px;">`;
                corr.correlations.forEach(c => {
                    const icon = c.type === 'positive' ? 'üìà' : 'üìâ';
                    const desc = c.type === 'positive' ? t('moveTogether') : t('inverseRelationship');
                    html += `<li style="margin: 8px 0;">${icon} <strong>${c.party1}</strong> ‚Üî <strong>${c.party2}</strong>: ${c.value.toFixed(2)} (${desc})</li>`;
                });
                html += '</ul></div>';
                listContainer.innerHTML = html;
            }
        }

        function renderVolatility() {
            const tbody = document.querySelector('#volatilityTable tbody');
            const data = DATA.volatility.filter(v => v.mean >= currentThreshold);

            tbody.innerHTML = data.map(v => {
                const stabilityText = t(v.stability);
                return `
                <tr>
                    <td>
                        <span style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; background: ${v.color}; margin-right: 8px;"></span>
                        <strong>${v.party}</strong>
                    </td>
                    <td>${v.mean}%</td>
                    <td>¬±${v.std}%</td>
                    <td>${v.cv}%</td>
                    <td class="${v.stability}">${stabilityText.charAt(0).toUpperCase() + stabilityText.slice(1)}</td>
                </tr>
            `}).join('');
        }

        function updateCharts() {
            renderTrendsChart();
            renderVolatility();
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</body>
</html>